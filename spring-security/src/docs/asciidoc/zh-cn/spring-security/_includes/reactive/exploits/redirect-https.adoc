[[webflux-redirect-https]]
= 重定向到 HTTPS

需要HTTPS才能提供安全的应用程序。可以使用以下Java配置将Spring Security配置为执行重定向到https的操作：

[source,java]
----
@Bean
SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {
	http
		// ...
		.redirectToHttps(withDefaults());
	return http.build();
}
----

可以轻松地将配置包装在if语句周围，仅在生产环境中将其打开。 或者，可以通过查找仅在生产中发生的有关请求的属性来启用它。 例如，如果生产环境将名为 `X-Forwarded-Pro` 的标头添加到以下Java配置，则可以使用：

[source,java]
----
@Bean
SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {
	http
		// ...
		.redirectToHttps(redirectToHttps ->
			redirectToHttps
				.httpsRedirectWhen(e -> e.getRequest().getHeaders().containsKey("X-Forwarded-Proto"))
		);
	return http.build();
}
----
